From 57cdffc5ea029a93eb851810841332fe7aedf178 Mon Sep 17 00:00:00 2001
From: retro98boy <retro98boy@qq.com>
Date: Sun, 27 Jul 2025 15:04:08 +0800
Subject: [PATCH] add rockchip,rt5640-codec conf files

---
 .../rockchip,rt5640-codec-HiFi.conf           | 90 +++++++++++++++++++
 .../simple-card/rockchip,rt5640-codec.conf    | 18 ++++
 2 files changed, 108 insertions(+)
 create mode 100644 ucm2/conf.d/simple-card/rockchip,rt5640-codec-HiFi.conf
 create mode 100644 ucm2/conf.d/simple-card/rockchip,rt5640-codec.conf

diff --git a/ucm2/conf.d/simple-card/rockchip,rt5640-codec-HiFi.conf b/ucm2/conf.d/simple-card/rockchip,rt5640-codec-HiFi.conf
new file mode 100644
index 0000000..84d0ef2
--- /dev/null
+++ b/ucm2/conf.d/simple-card/rockchip,rt5640-codec-HiFi.conf
@@ -0,0 +1,90 @@
+SectionVerb {
+	Value {
+		TQ "HiFi"
+		PlaybackChannels 2
+		CaptureChannels 2
+	}
+
+	EnableSequence [
+		# For speakers and headphones
+		cset "name='Stereo DAC MIXL DAC L1 Switch' on"
+		cset "name='Stereo DAC MIXR DAC R1 Switch' on"
+	]
+}
+
+SectionDevice."Speaker" {
+	Comment "Internal Speakers"
+
+	ConflictingDevice [
+		"Headphones"
+	]
+
+	Value {
+		PlaybackPriority 200
+		PlaybackPCM "hw:${CardId},0"
+	}
+
+	EnableSequence [
+		cset "name='SPOL MIX DAC L1 Switch' on"
+		cset "name='SPOR MIX DAC R1 Switch' on"
+		cset "name='Speaker L Playback Switch' on"
+		cset "name='Speaker R Playback Switch' on"
+	]
+
+	DisableSequence [
+		cset "name='Speaker L Playback Switch' off"
+		cset "name='Speaker R Playback Switch' off"
+		cset "name='SPOL MIX DAC L1 Switch' off"
+		cset "name='SPOR MIX DAC R1 Switch' off"
+	]
+}
+
+SectionDevice."Headphones" {
+	Comment "Headphones"
+
+	ConflictingDevice [
+		"Speaker"
+	]
+
+	Value {
+		PlaybackPriority 100
+		PlaybackPCM "hw:${CardId},0"
+		JackControl "Headphone Jack"
+		JackHWMute "Speaker"
+	}
+
+	EnableSequence [
+		cset "name='HPO MIX DAC1 Switch' on"
+		cset "name='HP L Playback Switch' on"
+		cset "name='HP R Playback Switch' on"
+	]
+
+	DisableSequence [
+		cset "name='HP L Playback Switch' off"
+		cset "name='HP R Playback Switch' off"
+		cset "name='HPO MIX DAC1 Switch' off"
+	]
+}
+
+SectionDevice."Mic" {
+	Comment "Internal Microphone"
+
+	Value {
+		CapturePriority 100
+		CapturePCM "hw:${CardId},0"
+	}
+
+	EnableSequence [
+		cset "name='RECMIXL BST1 Switch' on"
+		cset "name='RECMIXR BST1 Switch' on"
+		cset "name='Stereo ADC MIXL ADC1 Switch' on"
+		cset "name='Stereo ADC MIXR ADC1 Switch' on"
+	]
+
+	DisableSequence [
+		cset "name='Stereo ADC MIXL ADC1 Switch' off"
+		cset "name='Stereo ADC MIXR ADC1 Switch' off"
+		cset "name='RECMIXL BST1 Switch' off"
+		cset "name='RECMIXR BST1 Switch' off"
+	]
+}
diff --git a/ucm2/conf.d/simple-card/rockchip,rt5640-codec.conf b/ucm2/conf.d/simple-card/rockchip,rt5640-codec.conf
new file mode 100644
index 0000000..fdb68fd
--- /dev/null
+++ b/ucm2/conf.d/simple-card/rockchip,rt5640-codec.conf
@@ -0,0 +1,18 @@
+Syntax 4
+
+Comment "Rockchip ALC5640 Sound"
+
+SectionUseCase."HiFi" {
+	File "rockchip,rt5640-codec-HiFi.conf"
+	Comment "Play HiFi quality music"
+}
+
+BootSequence [
+	# Enable speakers default
+	cset "name='Stereo DAC MIXL DAC L1 Switch' on"
+	cset "name='Stereo DAC MIXR DAC R1 Switch' on"
+	cset "name='SPOL MIX DAC L1 Switch' on"
+	cset "name='SPOR MIX DAC R1 Switch' on"
+	cset "name='Speaker L Playback Switch' on"
+	cset "name='Speaker R Playback Switch' on"
+]
-- 
2.50.1

